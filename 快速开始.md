# 🚀 YOLO检测API快速开始指南

## 5分钟快速部署

### 第一步：安装Docker Desktop
1. 访问 https://www.docker.com/products/docker-desktop
2. 下载并安装Docker Desktop
3. 重启电脑
4. 验证安装：打开命令提示符，输入 `docker --version`

### 第二步：准备模型文件
```bash
# 在项目根目录创建models文件夹
mkdir models

# 将您的best.onnx文件复制到models文件夹
# 方法1：直接拖拽文件到models文件夹
# 方法2：使用命令复制
copy "您的模型文件路径" models\best.onnx
```

### 第三步：一键部署
```bash
# Windows用户：双击运行deploy.bat
# 或者在命令提示符中运行：
deploy.bat

# Linux/Mac用户：
chmod +x deploy.sh
./deploy.sh
```

### 第四步：验证部署
```bash
# 测试API是否正常
curl http://localhost:5000/health

# 或者用浏览器访问：
# http://localhost:5000/health
```

## 常用命令

### 查看服务状态
```bash
docker-compose ps
```

### 查看日志
```bash
docker-compose logs -f
```

### 停止服务
```bash
docker-compose down
```

### 重启服务
```bash
docker-compose restart
```

## API使用示例

### 健康检查
```bash
GET http://localhost:5000/health
```

### 单张图片检测
```bash
# 文件上传方式
curl -X POST http://localhost:5000/detect \
  -F "image=@your_image.jpg"

# Base64编码方式
curl -X POST http://localhost:5000/detect \
  -H "Content-Type: application/json" \
  -d '{"image_base64": "base64_string"}'
```

### 批量检测
```bash
curl -X POST http://localhost:5000/detect_batch \
  -H "Content-Type: application/json" \
  -d '{"images": ["base64_1", "base64_2"]}'
```

## 测试脚本

### 运行API测试
```bash
python test_api.py
```

### 运行客户端示例
```bash
python client_example.py
```

## 故障排除

### 常见问题

**1. 端口被占用**
- 修改 `docker-compose.yml` 中的端口映射
- 将 `"5000:5000"` 改为 `"8080:5000"`

**2. 模型文件找不到**
- 确保 `models/best.onnx` 文件存在
- 检查文件路径是否正确

**3. Docker启动失败**
- 检查Docker Desktop是否正常运行
- 查看Docker Desktop设置

**4. 内存不足**
- 在Docker Desktop设置中增加内存限制
- 或减少gunicorn worker数量

### 查看详细日志
```bash
# 查看构建日志
docker-compose build --no-cache

# 查看运行日志
docker-compose logs -f yolo-detection-api
```

## 云端部署

### 部署到云服务器
1. 将整个项目文件夹上传到服务器
2. 在服务器上运行：
```bash
cd /path/to/project
chmod +x deploy.sh
./deploy.sh
```

### 部署到云平台
1. 将代码推送到Git仓库
2. 在云平台创建容器服务
3. 配置构建规则和部署参数

## 下一步

- 📖 阅读 `Docker新手教程.md` 了解Docker详细用法
- 📖 阅读 `README.md` 了解完整功能
- 🧪 使用 `client_example.py` 测试API调用
- ☁️ 部署到云端供其他设备调用

## 获取帮助

如果遇到问题：
1. 查看 `Docker新手教程.md` 中的故障排除部分
2. 运行 `docker-compose logs -f` 查看详细错误信息
3. 检查模型文件是否正确放置

祝您部署顺利！🎉 